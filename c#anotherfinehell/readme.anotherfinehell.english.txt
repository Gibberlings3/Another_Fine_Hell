--- Another fine Hell Mod for SoD and EET ---

by jastey

Content:
GENERAL
DESCRIPTION
INSTALLATION
COMPATIBILITY NOTE
NOTE TO MODDERS
CREDITS
USED TOOLS AND RESSOURCES
HISTORY
COPYRIGHT NOTE



GENERAL 

This mod introduces a new reason why the PC falls at the end of SoD and has to leave town. For this, events after the slayer-dream-sequence are altered accordingly. The mod does not introduce a new catastrophy or frame work, it just uses what is already happening at Dragonspear basement and gives said events a new focus in people's perception of the PC's power and possible posed threat in combination with their divine heritage.
The mod uses as many original lines and situations as possible. Also, the event that leads to the fall in the original game is still in and still plays an important role for the PC to regain the favor of the Dukes of Baldur's Gate. It just isn't the reason the PC has to leave the town any more. 
For EET, install the mod directly to your EET game.

Please note: this mod is in alpha and does *not* include any BGII content yet. SoD part is finished.

In a later version, there will be the possibility to finish a quest given by the Dukes of Baldur's Gate to regain redemption - and to help the Sword Coast to get rid of a constant threat from the nine hells.


DESCRIPTION

The mod consists of three components:


1 Another Fine Hell - Optional Ending for SoD and BGII Closure
-----------------------------------
This is the main and required component of the mod. It changes the ending of SoD, with Bence Duncan starting his dialogue after he found the PC and Skie on the floor after the slayer-dream-sequence.

Public's perception of the PC being a child of Bhaal togather with returning unscarthed from Avernus is what leads to the riots in the city's streets. Skie's death will be noted but only plays a side role that adds to the overall hysteria.

This revised ending keeps all key moments: Bence Duncan and Corwin find the PC and take them back to Baldur's Gate, there is a public scene were the PC's Bhaal heritage is announced publicly, turmoil and chaos in the streets spread so the PC has to retreat to their quarters inside the palace. The visit of the Hooded Man, Corwin, and any romance interests will trigger as normal, although the Hooded Man will only appear after the PC went to bed. Murder accusations in the romance interests' dialogues were removed or altered appropriately.
Basically, the atmosphere in this revised ending is changed in so far, as it is not the single event of Skie's death, but what the PC did and where they went in combination with their Bhaal heritage that triggers the ambiguous chaotic reactions of the city's people. Also, reactions at the public scene make it clear that there is haters and followers to the PC both. 
Bence Duncan's hatred for the PC and Corwin's request to take the blame are still in.
There is no interrogation and the player doesn't have to click through any responses to trigger some nicer ending. Duke Belt will always come and explain the situation to the PC. Players who want to have a look around the sewers and fight off Bence Duncan and Corwin at the waterfall can still do so, just tell the guard who is supposed to lead the PC to the exit that the PC will go on their own.

This component will also offer a short closure in BGII (for EET) to the Soultaker dagger in case no other mod that covers this is installed in a later version. Note: no such closure is included yet.

2 Get the Hells Out - Quest Adaption with Extended BGII Content
-----------------------------------
This component gives a deeper quest to the changed ending of the main component: the portal at Dragonspear Castle will not be closed completely, but only set back to "dormant". Any divinely touched blood like the PC's could reopen it again, posing an imminent threat to the Sword Coast!
With this component, the PC will get a quest which will make it necessary to seek the help of a meta mage - an Incantatrix - in Amn. It will also feature the possibility to revisit the Dragonspear Castle area to complete the quest.

Note: This quest is in development. SoD content is finished but no BGII content is included so far.

3 PC's and Imoen's chest in Palace should have their content
-----------------------------------
This component will move the PC's chest content from the SoD camp chests back into the PC's chest on the (custom) third floor of the palace. In case the player has means to visit the big coalition camp area bd3000.are in BGII (for EET), the content will be moved back there so it won't be lost in a custom mod area.
It will also move Imoen's chest content from the original palace third floor to the custom one the mod uses. Imoen's stuff will be moved back into the original SoD palace 3rd floor in case the player has somehow access to it in BGII for EET.
With component "Imoen's chest moves with the campaign, too" from Imoen4Ever, Imoen's stuff will be moved from the last SoD camp (bd3000.are) to the custom palace area, and vice versa, accordingly.



INSTALLATION

NOTE: If you've previously installed the mod, remove it before extracting a new version. To do this, uninstall all previously installed components and delete the mod folder and executables. 

When installing or uninstalling, do not close the DOS window by clicking on the X button! Instead, press the Enter key when instructed to do so.


BG:EE
If you use SoD from GOG or Steam, you need to prepare your game with DLC Merger or modmerge before installing any mods:
argent77's DLC Merger:
https://forums.beamdog.com/discussion/71305/mod-dlc-merger-merge-steam-gog-sod-dlc-or-custom-dlcs-with-the-main-game

modmerge (if in doubt, use the DLC Merger instead):
https://forums.beamdog.com/discussion/50441/modmerge-merge-your-steam-gog-zip-based-dlc-into-something-weidu-nearinfinity-dltcep-can-use/p1

 
General (Windows, Mac OS X, and Linux)

Extract the contents of the mod archive to your game's main directory. 
NOTE: For Enhanced Edition it is important that you istall the mod to the language version you are playing the game in. Otherwise, the dialogues of the mod will not show but give error messages.


Windows
On successful extraction, there should be an c#anotherfinehell folder and a setup-c#anotherfinehell.exe file in your game folder. To install, simply double-click setup-c#anotherfinehell.exe and follow the instructions on screen.
Run setup-c#anotherfinehell.exe in your game folder to reinstall, uninstall or otherwise change components.

Mac OS X
The mod is packaged and installed with WeiDU. To install, extract the mod archive, then copy of the contents of the folder into your game folder (the folder which contains the CHITIN.KEY file). If properly extracted, you should have a "c#anotherfinehell" folder, setup-c#anotherfinehell, and setup-c#anotherfinehell.command in your game folder. To install, simply double-click setup-c#anotherfinehell.command and follow the instructions on screen.

Linux
Extract the contents of the mod to the folder of the game you wish to modify. Download the latest version of WeiDU for Linux from https://github.com/WeiDUorg/weidu/releases and copy WeiDU and WeInstall to /usr/bin. Following that, open a terminal and cd to your BG2 installation directory, run 'tolower' and answer Y to both queries. You can avoid running the second option (linux.ini) if you've already ran it once in the same directory. If you're unsure, running tolower and choosing both options is the safe bet.
Run WeInstall c#anotherfinehell in your game folder to install the mod. Then run wine BGMain.exe and start playing. 

NOTE: BG(II):EE are actively supported games. Please note that every patch update will wipe your current mod setup! If in the middle of a modded game you might want to delay the patch update as even after reinstalling the mods, you might not be able to continue with your old savegames. 


If you have installation problems or encounter any bugs, please post your bug report in one of the forum threads.


COMPATIBILITY NOTE

Another fine Hell mod is not compatible with any of the ending tweaks from Jastey's SoD Tweakpack ("8: SoD Ending: jastey's Tweaks").

It is compatible with Imoen4Ever and my SoD Tweakpack in the install order:
-Imoen4Ever
-Another fine Hell
-Jastey's SoD Tweakpack

Install Another fine Hell as an early quest mod, before NPC mods.
  


NOTE TO MODDERS 

This mod uses the standard cutscene "bdcut61.bcs" which handles the leaving of NPCs out of the party after the slayer-dream-sequence. The end of the cutscene is altered, but if you add a script block for your mod NPC as described in my "Modding Tutorial Part 2: Make Your NPC Comment and Move Along at the End of SoD" (link below), this mod will be compatible with your NPC mod.
BUT: if your NPC is supposed to be kidnapped with the PC and turn up in Irenicus Dungeon, you can also let them remain in the party. If this is the case, tagg the script block for the NPC's leaving with "Global("C#FtGSoD_RevisedEnd","GLOBAL",0)" so your NPC will stay with the PC in case this altered SoD ending is playing.
Note: the setting of "Global("bd_plot","global",591)" which handles the "PC is murder supect NPC reactions" in bd4100.are is skipped with this mod so they do not show.

In addition, parting of the group will now happen after the public scene upon returning to Baldur's Gate. There is one line of Duke Belt where your NPC could give a line, independent on whether they would stay or go. For this, use this example code from Ascalon to add an interjection for your NPC. Leaving will then be handled via your mod NPC's normale script block in bdcut61.bcs as mentioned above:

------------ compatibility code, all into tp2:
/* Another Fine Hell */
/*if this ending is installed, Breagar will just remain in the group at the end of SoD: add check variable for crossmod compatibility */
ACTION_IF FILE_EXISTS_IN_GAME ~c#afh3.bcs~ THEN BEGIN
  PRINT @214 
  COPY_EXISTING ~bdcut61.bcs~ ~override~
     DECOMPILE_AND_PATCH BEGIN
        REPLACE_TEXTUALLY CASE_INSENSITIVE EXACT_MATCH ~(\InParty("ACBre")\)~ ~\1
Global("C#FtGSoD_RevisedEnd","GLOBAL",0)~
     END
  BUT_ONLY_IF_IT_CHANGES 

/* get state number for c#afhblt to add Breagar's comment after Duke Belt announced that the PC will have to leave the town:
@77 /* ~[Duke Belt]Sort your equipment and rest once again. Tomorrow morning we will take you out of the city unnoticed.~ */
*/
  OUTER_SET belt_interjection = STATE_WHICH_SAYS 77 IN ~c#anotherfinehell/translations/autotra/%s/anotherfinehell_sod.tra~ FROM ~c#afhblt~
/* add interjection for Breagar into Duke Belt's dialogue */
<<<<<<<< .../add_acbre_afh_interjection.d
I_C_T c#afhblt %belt_interjection% ACBre_c#afhblt_77
== ACBreJ IF ~InParty("ACBRE") InMyArea("ACBRE")!StateCheck("ACBRE",CD_STATE_NOTVALID)~ THEN @5021 /* ~I will remain at your side. If that is what you want, of course.~ */
END
>>>>>>>>
COMPILE EVALUATE_BUFFER ~.../add_acbre_afh_interjection.d~ USING ~ACBre/tra/autotra/%s/game-acbre.tra~
END //Another Fine Hell
-----------------end compatibility code



+++++++++++++++Please do not translate below here ++++++++++++++++++++++++


CREDITS

JohnBob: French translation (vAlpha_211220)
Lauriel: ideas 
Machiavélique: proofreading (French) (vAlpha_220123)



USED TOOLS AND RESSOURCES

Another fine Hell Mod was created using the resources provided by the IESDP (https://gibberlings3.github.io/iesdp/index.htm) and with the following software:

Near Infinity				https://github.com/Argent77/NearInfinity/releases/latest
WeiDU					http://www.weidu.org
grepWin			http://tools.stefankueng.com/grepWin.html

Modding communities, tutorials and technical assistance:

jastey's SoD NPC Modding Tutorials:
https://www.gibberlings3.net/forums/topic/30139-jasteys-sod-npc-modding-tutorials/

Kerzenburgforum				https://www.baldurs-gate.de/index.php
The Gibberlings Three			http://gibberlings3.net
Pocket Plane Group			http://pocketplane.net
Spellhold Studios			http://www.shsforums.net/

SoD Walkthrough at GameBanshee http://www.gamebanshee.com/baldursgate/walkthrough/sod-korlaszstomb.php



HISTORY
Version Alpha_220923
-NPCs should leave and cutscene should play correctly (variable should be set if Imoen is in group, too).
-Items dropped by NPCs upon leaving should be accessible in third floor of palace.

Version Alpha_220123
-French translation proof read by Machiavélique

Version Alpha_220117
-corrected patching of some scripts (should patch bcs, not baf)
-Crossmod with Imoen4Ever: Imoen will remain in group, too, after Slayer dream scene

Version Alpha_211220
-French version added, by JohnBob

Version Alpha_211102
-first public release


COPYRIGHT NOTE
=================================================================================
Another fine Hell mod for SoD is unofficial Fan Content permitted under the Fan Content Policy. Not approved/endorsed by Wizards. Portions of the materials used are property of Wizards of the Coast. ©Wizards of the Coast LLC.
This mod is also not developed, supported, or endorsed by BioWare, Black Isle Studios, Interplay Entertainment Corp., Overhaul Games or Beamdog. All other trademarks and copyrights are property of their respective owners.
=================================================================================